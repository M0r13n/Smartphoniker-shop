function getURLSearchParams(){const e=window.location.search;return new URLSearchParams(e)}const toInt=e=>null===e||isNaN(e)?-1:parseInt(e);function $(e){return document.getElementById(e)}function byQuery(e){return document.querySelectorAll(e)}const scrollToTop=()=>{const e=document.documentElement.scrollTop||document.body.scrollTop;e>0&&(window.requestAnimationFrame(scrollToTop),window.scrollTo(0,e-e/16))};function appendURL(e="/search/"){const t=window.location.origin;let o=new URLSearchParams(t+e),n=$("Search");0!==n.value.length&&(o.searchParams.append("search",n),window.location.href=o)}function hide(e){e.style.display="none"}function show(e,t=!1){e.style.display=t||""}const extractPlainText=(e,t=!1)=>{const o=t?e.querySelectorAll(t)[0]:e;return o.textContent.toLowerCase()||o.innerText.toLowerCase()||""};function filterFunction(){const e=$("Search").value.toLowerCase(),t=$("FaqList").getElementsByClassName("faq__subheading");let o,n;for(const o of t)e.length>0?hide(o):show(o);let a=$("FaqList").querySelectorAll("li.faq__item");for(const t of a)o=extractPlainText(t,"span.faq__question"),n=extractPlainText(t,"div.faq__answer"),o.indexOf(e)>-1||n.indexOf(e)>-1?show(t):hide(t)}const validateMail=e=>{return!!/\S+@\S+\.\S+/.test(e.value)||(show(e,"block"),!1)},faqJS=()=>{$("Search").addEventListener("keyup",()=>{filterFunction()},!1);const e=getURLSearchParams(),t=toInt(e.get("q")),o=$("FaqList").getElementsByClassName("faq__item"),n=$("FaqList").getElementsByTagName("h3");let a=0;for(const e of o)if(a++,e.addEventListener("click",()=>{e.classList.toggle("collapsed")},!1),t>0&&hide(e),t===a){for(const e of n)hide(e);show(e),e.classList.toggle("collapsed")}},searchJS=()=>{$("Submit").addEventListener("click",()=>{appendURL()},!1),$("Search").addEventListener("keypress",e=>{"Enter"===e.key&&appendURL()},!1)},getPrices=e=>{const t=byQuery(e);return[].map.call(t,e=>toInt(e.getAttribute("data-price")))},totalJS=()=>{const e=document.getElementsByName("repairs"),t=()=>{let e=getPrices('input[name="repairs"]:checked');if(e.length>1){let t=Math.min(...e),o=e.reduce((e,t)=>e+t),n=o-t+.8*t;$("Total").innerHTML="<s>"+toInt(o)+"</s> "+toInt(n)}else $("Total").innerHTML=e[0]||0};for(const o of e)o.addEventListener("change",()=>{t()},!1)},colorJS=()=>{const e=document.getElementsByName("color");for(const t of e)t.checked&&($("ColorName").innerHTML="Aktuelle Farbauswahl: "+t.id.replace("_"," ")),t.addEventListener("change",()=>{t.checked&&($("ColorName").innerHTML="Aktuelle Farbauswahl: "+t.id.replace("_"," "))},!1)},orderValidation=()=>{let e=!0;return $("ShippingLabel").checked||""==$("shop").value&&(e=!1,show($("Selecterror"),"block")),e},selectionValidation=e=>{const t=[];for(const o of e){let e=!0;0===byQuery("input[name="+o+"]:checked").length&&(e=!1),e?hide($(o)):show($(o),"block"),t.push(e)}return t},inputValidation=e=>{const t=[];for(const o of e){let e=!0;const n=byQuery("[name="+o+"]")[0].value;void 0!==n&&""!=n||(e=!1),e?hide($(o)):show($(o),"block"),t.push(e)}return t},formsJS=e=>{const t=[];if(!$("Submit"))return!1;$("Submit").addEventListener("click",o=>{switch(e){case"Modell":t.push(...selectionValidation(["color","repairs"]));break;case"Customer":t.push(...inputValidation(["first_name","last_name","street","zip_code","city","email"])),t.push(validateMail($("Email")));break;case"Other":t.push(...inputValidation(["email","problem_description"]))}t.includes(!1)&&(show($("Error0"),"block"),o.preventDefault(),t.length=0,scrollToTop())},!0)},orderJS=()=>{$("ShippingLabel").addEventListener("change",()=>{$("Orderselect").classList.toggle("hide"),$("Orderselect").getElementsByTagName("option")[1].selected="selected",$("Labelcost").classList.toggle("hide")}),$("Submit").addEventListener("click",e=>{orderValidation()||(show($("Error0"),"block"),e.preventDefault(),scrollToTop())},!0),$("SecondarySubmit").addEventListener("click",e=>{orderValidation()||(show($("Error0"),"block"),e.preventDefault(),scrollToTop())},!0)},globalErrorJS=()=>{const e=byQuery("a.globalerror__close");for(const t of e)t.addEventListener("click",function(e){e.preventDefault(),hide(this.parentNode)})},main=()=>{switch(window.onload=(()=>{byQuery("body")[0].classList.remove("preload")}),$("menu").addEventListener("click",()=>{$("nav").classList.toggle("header__list--in")},!1),globalErrorJS(),window.location.pathname){case"/faq":faqJS();break;case"/shop":case"/search":$("Submit").addEventListener("click",()=>{appendURL()},!1),$("Search").addEventListener("keypress",e=>{"Enter"===e.key&&appendURL()},!1);break;case"/register":formsJS("Customer");break;case"/order":$("ShippingLabel").addEventListener("change",()=>{$("Orderselect").classList.toggle("hide"),$("Orderselect").getElementsByTagName("option")[1].selected="selected",$("Labelcost").classList.toggle("hide")}),$("Submit").addEventListener("click",e=>{orderValidation()||(show($("Error0"),"block"),e.preventDefault(),scrollToTop())},!0),$("SecondarySubmit").addEventListener("click",e=>{orderValidation()||(show($("Error0"),"block"),e.preventDefault(),scrollToTop())},!0);break;case"/anfrage":formsJS("Other");break;default:colorJS(),totalJS(),formsJS("Modell")}};main();